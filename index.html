<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Estatus CBDC</title>

<script src="https://cdn.plot.ly/plotly-2.32.0.min.js"></script>

<style>
html, body {
  height: 100%;
  margin: 0;
}

body {
  font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  background: #f5f7fb;
  overflow: hidden;
}

.stage {
  position: relative;
  width: 100vw;
  height: 100vh;
}

#map {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
}

/* ===============================
   OVERLAY TRANSPARENTE
================================ */

.overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  padding: 30px 20px 45px;
  text-align: center;
  z-index: 10;
  color: white;
  transition: opacity 0.4s ease, transform 0.4s ease;
  pointer-events: none;
}

.overlay::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    to bottom,
    rgba(0,0,0,0.65) 0%,
    rgba(0,0,0,0.35) 45%,
    rgba(0,0,0,0.0) 100%
  );
  z-index: -1;
}

.overlay h1 {
  margin: 0;
  font-size: 42px;
  font-weight: 800;
  letter-spacing: -0.02em;
}

.overlay .subtitle {
  margin-top: 10px;
  font-size: 15px;
  opacity: 0.9;
}

.overlay a {
  color: #93c5fd;
  text-decoration: underline;
}

.overlay.hidden {
  opacity: 0;
  transform: translateY(-25px);
}

/* ===============================
   LEYENDA ELEGANTE
================================ */

.legend {
  position: absolute;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 28px;
  padding: 14px 26px;
  background: rgba(255,255,255,0.92);
  backdrop-filter: blur(6px);
  border-radius: 40px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.15);
  font-size: 14px;
  font-weight: 500;
  z-index: 10;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 8px;
  white-space: nowrap;
}

.legend .color {
  width: 16px;
  height: 16px;
  border-radius: 50%;
}

/* Colores alineados con Viridis */

.c-cancelado { background: #440154; }
.c-investigacion { background: #3b528b; }
.c-desarrollo { background: #21918c; }
.c-piloto { background: #5ec962; }
.c-circulacion { background: #fde725; }

</style>
</head>

<body>
<div class="stage">

  <div class="overlay">
    <h1>Estatus CBDC</h1>
    <div class="subtitle">
      Fuente: elaboración propia con información de los bancos centrales.<br>
      Contacto: <a href="mailto:fpardo02@ucm.es">fpardo02@ucm.es</a>
    </div>
  </div>

  <div id="map"></div>

  <div class="legend">
    <div class="legend-item">
      <span class="color c-cancelado"></span> Cancelado
    </div>
    <div class="legend-item">
      <span class="color c-investigacion"></span> Investigación
    </div>
    <div class="legend-item">
      <span class="color c-desarrollo"></span> Desarrollo
    </div>
    <div class="legend-item">
      <span class="color c-piloto"></span> Piloto
    </div>
    <div class="legend-item">
      <span class="color c-circulacion"></span> Circulación
    </div>
  </div>

</div>

<script>

// =============================
// DATOS
// =============================

const rows = [ { iso3:"BHS", pais:"Bahamas", emisor:"Central Bank of The Bahamas", moneda:"Sand Dollar", tipo:"Minorista", estado:"Circulación", fase:"Implementación plena", fecha:"2020", obj1:"Inclusión financiera", obj2:"Pagos digitales", enlace:"https://www.centralbankbahamas.com" }, { iso3:"JAM", pais:"Jamaica", emisor:"Bank of Jamaica", moneda:"Jam-Dex", tipo:"Minorista", estado:"Circulación", fase:"Implementación plena", fecha:"2022", obj1:"Inclusión financiera", obj2:"Formalización económica", enlace:"https://boj.org.jm" }, { iso3:"NGA", pais:"Nigeria", emisor:"Central Bank of Nigeria", moneda:"eNaira", tipo:"Minorista", estado:"Circulación", fase:"Implementación plena", fecha:"2021", obj1:"Inclusión financiera", obj2:"Eficiencia pagos", enlace:"https://www.cbn.gov.ng" }, { iso3:"ZWE", pais:"Zimbabue", emisor:"Reserve Bank of Zimbabwe", moneda:"ZiG (digital)", tipo:"Minorista", estado:"Circulación", fase:"Implementación", fecha:"2024", obj1:"Estabilidad monetaria", obj2:"Confianza pública", enlace:"https://www.rbz.co.zw" }, { iso3:"AIA", pais:"Anguila", emisor:"Eastern Caribbean Central Bank", moneda:"DCash", tipo:"Minorista", estado:"Circulación", fase:"Implementación regional", fecha:"2021", obj1:"Integración regional", obj2:"Inclusión financiera", enlace:"https://www.eccb-centralbank.org" }, { iso3:"ATG", pais:"Antigua y Barbuda", emisor:"Eastern Caribbean Central Bank", moneda:"DCash", tipo:"Minorista", estado:"Circulación", fase:"Implementación regional", fecha:"2021", obj1:"Integración regional", obj2:"Inclusión financiera", enlace:"https://www.eccb-centralbank.org" }, { iso3:"DMA", pais:"República Dominicana", emisor:"Eastern Caribbean Central Bank", moneda:"DCash", tipo:"Minorista", estado:"Circulación", fase:"Implementación regional", fecha:"2021", obj1:"Integración regional", obj2:"Inclusión financiera", enlace:"https://www.eccb-centralbank.org" }, { iso3:"GRD", pais:"Granada", emisor:"Eastern Caribbean Central Bank", moneda:"DCash", tipo:"Minorista", estado:"Circulación", fase:"Implementación regional", fecha:"2021", obj1:"Integración regional", obj2:"Inclusión financiera", enlace:"https://www.eccb-centralbank.org" }, { iso3:"MSR", pais:"Montserrat", emisor:"Eastern Caribbean Central Bank", moneda:"DCash", tipo:"Minorista", estado:"Circulación", fase:"Implementación regional", fecha:"2021", obj1:"Integración regional", obj2:"Inclusión financiera", enlace:"https://www.eccb-centralbank.org" }, { iso3:"KNA", pais:"San Cristóbal y Nieves", emisor:"Eastern Caribbean Central Bank", moneda:"DCash", tipo:"Minorista", estado:"Circulación", fase:"Implementación regional", fecha:"2021", obj1:"Integración regional", obj2:"Inclusión financiera", enlace:"https://www.eccb-centralbank.org" }, { iso3:"LCA", pais:"Santa Lucía", emisor:"Eastern Caribbean Central Bank", moneda:"DCash", tipo:"Minorista", estado:"Circulación", fase:"Implementación regional", fecha:"2021", obj1:"Integración regional", obj2:"Inclusión financiera", enlace:"https://www.eccb-centralbank.org" }, { iso3:"VCT", pais:"San Vicente y las Granadinas", emisor:"Eastern Caribbean Central Bank", moneda:"DCash", tipo:"Minorista", estado:"Circulación", fase:"Implementación regional", fecha:"2021", obj1:"Integración regional", obj2:"Inclusión financiera", enlace:"https://www.eccb-centralbank.org" }, { iso3:"AUS", pais:"Australia", emisor:"Reserve Bank of Australia", moneda:"eAUD", tipo:"Mixta", estado:"Piloto", fase:"Pilotos tokenizados", fecha:"2023", obj1:"Innovación pagos", obj2:"Tokenización financiera", enlace:"https://www.rba.gov.au" }, { iso3:"BRA", pais:"Brasil", emisor:"Banco Central do Brasil", moneda:"Drex", tipo:"Mayorista", estado:"Piloto", fase:"Mayorista ampliado", fecha:"2023", obj1:"Tokenización financiera", obj2:"Infraestructura pagos", enlace:"https://www.bcb.gov.br" }, { iso3:"GHA", pais:"Ghana", emisor:"Bank of Ghana", moneda:"eCedi", tipo:"Minorista", estado:"Piloto", fase:"Piloto limitado", fecha:"2021", obj1:"Inclusión financiera", obj2:"Pagos digitales", enlace:"https://www.bog.gov.gh" }, { iso3:"HKG", pais:"Hong Kong", emisor:"Hong Kong Monetary Authority", moneda:"e-HKD", tipo:"Minorista", estado:"Piloto", fase:"Fase 2", fecha:"2022", obj1:"Modernización pagos", obj2:"Innovación fintech", enlace:"https://www.hkma.gov.hk" }, { iso3:"IND", pais:"India", emisor:"Reserve Bank of India", moneda:"Digital Rupee (e₹)", tipo:"Mixta", estado:"Piloto", fase:"Retail + Wholesale", fecha:"2022", obj1:"Eficiencia pagos", obj2:"Reducción efectivo", enlace:"https://www.rbi.org.in" }, { iso3:"IDN", pais:"Indonesia", emisor:"Bank Indonesia", moneda:"Digital Rupiah", tipo:"Mixta", estado:"Piloto", fase:"Diseño + pruebas", fecha:"2022", obj1:"Soberanía monetaria", obj2:"Estabilidad financiera", enlace:"https://www.bi.go.id" }, { iso3:"IRN", pais:"Irán", emisor:"Central Bank of Iran", moneda:"Crypto-Rial", tipo:"Minorista", estado:"Piloto", fase:"Piloto limitado", fecha:"2022", obj1:"Pagos digitales", obj2:"Control monetario", enlace:"https://www.cbi.ir" }, { iso3:"ISR", pais:"Israel", emisor:"Bank of Israel", moneda:"Digital Shekel", tipo:"Minorista", estado:"Piloto", fase:"Pruebas técnicas", fecha:"2022", obj1:"Eficiencia pagos", obj2:"Competencia financiera", enlace:"https://www.boi.org.il" }, { iso3:"JPN", pais:"Japon", emisor:"Bank of Japan", moneda:"Digital Yen", tipo:"Minorista", estado:"Piloto", fase:"Fase técnica", fecha:"2021", obj1:"Resiliencia pagos", obj2:"Acceso público", enlace:"https://www.boj.or.jp" }, { iso3:"KAZ", pais:"Kazajistán", emisor:"National Bank of Kazakhstan", moneda:"Digital Tenge", tipo:"Minorista", estado:"Piloto", fase:"Piloto nacional", fecha:"2023", obj1:"Pagos digitales", obj2:"Innovación fintech", enlace:"https://nationalbank.kz" }, { iso3:"LAO", pais:"Laos", emisor:"Bank of the Lao PDR", moneda:"Proyecto BOL", tipo:"Minorista", estado:"Piloto", fase:"Piloto limitado", fecha:"2022", obj1:"Inclusión financiera", obj2:"Digitalización pagos", enlace:"https://www.bol.gov.la" }, { iso3:"MYS", pais:"Malasia", emisor:"Bank Negara Malaysia", moneda:"Proyecto BNM", tipo:"Mayorista", estado:"Piloto", fase:"Piloto mayorista", fecha:"2022", obj1:"Liquidación mayorista", obj2:"Infraestructura pagos", enlace:"https://www.bnm.gov.my" }, { iso3:"MUS", pais:"Mauricio", emisor:"Bank of Mauritius", moneda:"Digital Rupee", tipo:"Mayorista", estado:"Piloto", fase:"Piloto wholesale", fecha:"2021", obj1:"Liquidación mayorista", obj2:"Resiliencia financiera", enlace:"https://www.bom.mu" }, { iso3:"MNE", pais:"Montenegro", emisor:"Central Bank of Montenegro", moneda:"Proyecto CBDC", tipo:"En estudio", estado:"En estudio", fase:"Estudio técnico", fecha:"2023", obj1:"Innovación pagos", obj2:"Modernización financiera", enlace:"https://www.cbcg.me" }, { iso3:"NOR", pais:"Noruega", emisor:"Norges Bank", moneda:"Digital Krone", tipo:"Minorista", estado:"Piloto", fase:"Fase experimental", fecha:"2021", obj1:"Acceso público", obj2:"Resiliencia pagos", enlace:"https://www.norges-bank.no" }, { iso3:"OMN", pais:"Omán", emisor:"Central Bank of Oman", moneda:"Digital Rial", tipo:"Mayorista", estado:"Piloto", fase:"Piloto mayorista", fecha:"2023", obj1:"Liquidación mayorista", obj2:"Eficiencia pagos", enlace:"https://www.cbo.gov.om" }, { iso3:"PLW", pais:"Palaos", emisor:"National Development Bank of Palau", moneda:"Palau Stablecoin", tipo:"Minorista", estado:"Piloto", fase:"Implementación piloto", fecha:"2023", obj1:"Inclusión financiera", obj2:"Pagos digitales", enlace:"https://www.ndbpalau.com" }, { iso3:"PHL", pais:"filipinas", emisor:"Bangko Sentral ng Pilipinas", moneda:"Project CBDCPh", tipo:"Mayorista", estado:"Piloto", fase:"Wholesale", fecha:"2022", obj1:"Liquidación mayorista", obj2:"Eficiencia pagos", enlace:"https://www.bsp.gov.ph" }, { iso3:"QAT", pais:"Katar", emisor:"Qatar Central Bank", moneda:"Digital Riyal", tipo:"Mayorista", estado:"Piloto", fase:"Piloto mayorista", fecha:"2023", obj1:"Liquidación mayorista", obj2:"Pagos transfron.", enlace:"https://www.qcb.gov.qa" }, { iso3:"RUS", pais:"Rusia", emisor:"Bank of Russia", moneda:"Digital Ruble", tipo:"Minorista", estado:"Piloto", fase:"Piloto ampliado", fecha:"2023", obj1:"Soberanía monetaria", obj2:"Infraestructura pagos", enlace:"https://www.cbr.ru" }, { iso3:"SAU", pais:"Arabia Saudí", emisor:"Saudi Central Bank", moneda:"Digital Riyal / Aber", tipo:"Mayorista", estado:"Piloto", fase:"Transfronterizo", fecha:"2019", obj1:"Pagos transfron.", obj2:"Liquidación mayorista", enlace:"https://www.sama.gov.sa" }, { iso3:"SGP", pais:"Singapur", emisor:"Monetary Authority of Singapore", moneda:"Project Orchid", tipo:"Mixta", estado:"Piloto", fase:"Experimental", fecha:"2022", obj1:"Programabilidad dinero", obj2:"Innovación pagos", enlace:"https://www.mas.gov.sg" }, { iso3:"SLB", pais:"Islas Salomón", emisor:"Central Bank of Solomon Islands", moneda:"Proyecto CBDC", tipo:"En estudio", estado:"En estudio", fase:"Estudio preliminar", fecha:"2023", obj1:"Inclusión financiera", obj2:"Modernización pagos", enlace:"https://www.cbsi.com.sb" }, { iso3:"ZAF", pais:"Sudáfrica", emisor:"South African Reserve Bank", moneda:"Project Khokha", tipo:"Mayorista", estado:"Piloto", fase:"Mayorista DLT", fecha:"2019", obj1:"Liquidación mayorista", obj2:"Eficiencia DLT", enlace:"https://www.resbank.co.za" }, { iso3:"KOR", pais:"Corea del Sur", emisor:"Bank of Korea", moneda:"Digital Won", tipo:"Minorista", estado:"Piloto", fase:"Piloto técnico", fecha:"2022", obj1:"Modernización pagos", obj2:"Programabilidad", enlace:"https://www.bok.or.kr" }, { iso3:"SWE", pais:"Suecia", emisor:"Sveriges Riksbank", moneda:"e-Krona", tipo:"Minorista", estado:"Piloto", fase:"Fase técnica", fecha:"2020", obj1:"Acceso público", obj2:"Sustitución efectivo", enlace:"https://www.riksbank.se" }, { iso3:"CHE", pais:"Suiza", emisor:"Swiss National Bank", moneda:"Project Helvetia", tipo:"Mayorista", estado:"Piloto", fase:"Fase III", fecha:"2020", obj1:"Liquidación DLT", obj2:"Activos tokenizados", enlace:"https://www.snb.ch" }, { iso3:"THA", pais:"Tailandia", emisor:"Bank of Thailand", moneda:"Digital Baht", tipo:"Minorista", estado:"Piloto", fase:"Piloto retail", fecha:"2023", obj1:"Eficiencia pagos", obj2:"Innovación fintech", enlace:"https://www.bot.or.th" }, { iso3:"TUR", pais:"Turquía", emisor:"Central Bank of the Republic of Turkey", moneda:"Digital Turkish Lira", tipo:"Minorista", estado:"Piloto", fase:"Piloto técnico", fecha:"2023", obj1:"Soberanía monetaria", obj2:"Pagos digitales", enlace:"https://www.tcmb.gov.tr" }, { iso3:"UKR", pais:"Ucrania", emisor:"National Bank of Ukraine", moneda:"e-Hryvnia", tipo:"Minorista", estado:"Piloto", fase:"Pruebas piloto", fecha:"2022", obj1:"Modernización pagos", obj2:"Soberanía monetaria", enlace:"https://bank.gov.ua" }, { iso3:"ARE", pais:"Emiratos Árabes Unidos", emisor:"Central Bank of the UAE", moneda:"Digital Dirham", tipo:"Mayorista", estado:"Piloto", fase:"Mayorista / mBridge", fecha:"2023", obj1:"Pagos transfron.", obj2:"Liquidación mayorista", enlace:"https://www.centralbank.ae" }, { iso3:"CAN", pais:"Canadá", emisor:"Bank of Canada", moneda:"— (sin nombre oficial)", tipo:"Minorista", estado:"Desarrollo", fase:"Investigación y desarrollo (sin piloto)", fecha:"Desde 2026 (preparación)", obj1:"Acceso público", obj2:"Soberanía monetaria", enlace:"https://www.bankofcanada.ca/digitaldollar/" }, { iso3:"GBR", pais:"Reino Unido", emisor:"Bank of England", moneda:"Digital Pound", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de diseño", fecha:"Sin fecha (en evaluación)", obj1:"Complemento efectivo", obj2:"Innovación pagos", enlace:"https://www.bankofengland.co.uk" }, { iso3:"CHL", pais:"Chile", emisor:"Banco Central de Chile", moneda:"Peso Digital", tipo:"Minorista", estado:"Desarrollo", fase:"Evaluación", fecha:"Sin fecha", obj1:"Modernización pagos", obj2:"Inclusión financiera", enlace:"https://www.bcentral.cl" }, { iso3:"COL", pais:"Colombia", emisor:"Banco de la República", moneda:"Peso Digital", tipo:"Minorista", estado:"Desarrollo", fase:"Diseño conceptual", fecha:"Sin fecha", obj1:"Digitalización pagos", obj2:"Inclusión financiera", enlace:"https://www.banrep.gov.co" }, { iso3:"MEX", pais:"México", emisor:"Banco de México", moneda:"Moneda Digital Banxico", tipo:"Minorista", estado:"Desarrollo", fase:"Desarrollo inicial", fecha:"Sin fecha", obj1:"Inclusión financiera", obj2:"Eficiencia pagos", enlace:"https://www.banxico.org.mx" }, { iso3:"PER", pais:"Perú", emisor:"Banco Central de Reserva del Perú", moneda:"Digital Sol", tipo:"Minorista", estado:"Desarrollo", fase:"Diseño / evaluación", fecha:"Sin fecha", obj1:"Inclusión financiera", obj2:"Pagos digitales", enlace:"https://www.bcrp.gob.pe" }, { iso3:"MAR", pais:"Marruecos", emisor:"Bank Al-Maghrib", moneda:"Digital Dirham", tipo:"Mayorista", estado:"Desarrollo", fase:"Estudio", fecha:"Sin fecha", obj1:"Modernización financiera", obj2:"Pagos digitales", enlace:"https://www.bkam.ma" }, { iso3:"NAM", pais:"Namibia", emisor:"Bank of Namibia", moneda:"Digital Dollar", tipo:"Minorista", estado:"Desarrollo", fase:"Investigación", fecha:"Sin fecha", obj1:"Inclusión financiera", obj2:"Modernización pagos", enlace:"https://www.bon.com.na" }, { iso3:"RWA", pais:"Ruanda", emisor:"National Bank of Rwanda", moneda:"Digital Franc", tipo:"Minorista", estado:"Desarrollo", fase:"Estudio", fecha:"Sin fecha", obj1:"Inclusión financiera", obj2:"Pagos digitales", enlace:"https://www.bnr.rw" }, { iso3:"LKA", pais:"Sri lanka", emisor:"Central Bank of Sri Lanka", moneda:"Digital Rupee", tipo:"Minorista", estado:"Desarrollo", fase:"Evaluación técnica", fecha:"Sin fecha", obj1:"Inclusión financiera", obj2:"Modernización pagos", enlace:"https://www.cbsl.gov.lk" }, { iso3:"TWN", pais:"Taiwán", emisor:"Central Bank of the Republic of China (Taiwan)", moneda:"Digital New Taiwan Dollar", tipo:"Minorista", estado:"Desarrollo", fase:"Piloto técnico", fecha:"2022", obj1:"Modernización pagos", obj2:"Innovación financiera", enlace:"https://www.cbc.gov.tw" }, { iso3:"TUN", pais:"Túnez", emisor:"Central Bank of Tunisia", moneda:"Digital Dinar", tipo:"Minorista", estado:"Desarrollo", fase:"Evaluación", fecha:"Sin fecha", obj1:"Modernización monetaria", obj2:"Pagos digitales", enlace:"https://www.bct.gov.tn" }, { iso3:"BLR", pais:"Bielorrusia", emisor:"National Bank of the Republic of Belarus", moneda:"Digital Ruble", tipo:"Minorista", estado:"Desarrollo", fase:"Diseño conceptual", fecha:"Sin fecha", obj1:"Pagos digitales", obj2:"Soberanía monetaria", enlace:"https://www.nbrb.by" }, { iso3:"KGZ", pais:"Kirguistán", emisor:"National Bank of the Kyrgyz Republic", moneda:"Digital Som", tipo:"Minorista", estado:"Desarrollo", fase:"Fase técnica", fecha:"Sin fecha", obj1:"Inclusión financiera", obj2:"Pagos digitales", enlace:"https://www.nbkr.kg" }, { iso3:"MAC", pais:"Macao", emisor:"Monetary Authority of Macau", moneda:"Digital Pataca", tipo:"Minorista", estado:"Desarrollo", fase:"Evaluación técnica", fecha:"Sin fecha", obj1:"Modernización pagos", obj2:"Innovación fintech", enlace:"https://www.amcm.gov.mo" }, { iso3:"HUN", pais:"Hungría", emisor:"Magyar Nemzeti Bank", moneda:"Proyecto MNB", tipo:"En estudio", estado:"En estudio", fase:"Investigación", fecha:"Sin fecha", obj1:"Innovación pagos", obj2:"Análisis riesgos", enlace:"https://www.mnb.hu" }, { iso3:"SWZ", pais:"Esuatini", emisor:"Central Bank of Eswatini", moneda:"Proyecto CBDC", tipo:"En estudio", estado:"En estudio", fase:"Estudio preliminar", fecha:"Sin fecha", obj1:"Inclusión financiera", obj2:"Modernización pagos", enlace:"https://www.centralbank.org.sz" }, { iso3:"MDG", pais:"Madagascar", emisor:"Banky Foiben’i Madagasikara", moneda:"Proyecto CBDC", tipo:"En estudio", estado:"En estudio", fase:"Evaluación técnica", fecha:"Sin fecha", obj1:"Inclusión financiera", obj2:"Pagos digitales", enlace:"https://www.banque-centrale.mg" }, { iso3:"ECU", pais:"Ecuador", emisor:"Banco Central del Ecuador", moneda:"Dinero Electrónico (SDE)", tipo:"Minorista", estado:"Cancelado", fase:"—", fecha:"2018", obj1:"Inclusión financiera", obj2:"Pagos electrónicos", enlace:"https://www.bce.fin.ec" }, { iso3:"URY", pais:"Uruguay", emisor:"Banco Central del Uruguay (BCU)", moneda:"e-Peso", tipo:"Minorista", estado:"Cancelado", fase:"Piloto cerrado", fecha:"2017–2018", obj1:"Inclusión financiera", obj2:"Innovación pagos", enlace:"https://www.bcu.gub.uy" }, { iso3:"DEU", pais:"Alemania", emisor:"European Central Bank (Eurosistema)", moneda:"Euro digital", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de preparación", fecha:"Decisión prevista 2026", obj1:"Autonomía estratégica", obj2:"Acceso público", enlace:"https://www.ecb.europa.eu" }, { iso3:"AUT", pais:"Austria", emisor:"European Central Bank (Eurosistema)", moneda:"Euro digital", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de preparación", fecha:"Decisión prevista 2026", obj1:"Autonomía estratégica", obj2:"Acceso público", enlace:"https://www.ecb.europa.eu" }, { iso3:"BEL", pais:"Bélgica", emisor:"European Central Bank (Eurosistema)", moneda:"Euro digital", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de preparación", fecha:"Decisión prevista 2026", obj1:"Autonomía estratégica", obj2:"Acceso público", enlace:"https://www.ecb.europa.eu" }, { iso3:"BGR", pais:"Bulgaria", emisor:"European Central Bank (Eurosistema)", moneda:"Euro digital", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de preparación", fecha:"Decisión prevista 2026", obj1:"Autonomía estratégica", obj2:"Acceso público", enlace:"https://www.ecb.europa.eu" }, { iso3:"CYP", pais:"Chipré", emisor:"European Central Bank (Eurosistema)", moneda:"Euro digital", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de preparación", fecha:"Decisión prevista 2026", obj1:"Autonomía estratégica", obj2:"Acceso público", enlace:"https://www.ecb.europa.eu" }, { iso3:"HRV", pais:"Croacia", emisor:"European Central Bank (Eurosistema)", moneda:"Euro digital", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de preparación", fecha:"Decisión prevista 2026", obj1:"Autonomía estratégica", obj2:"Acceso público", enlace:"https://www.ecb.europa.eu" }, { iso3:"SVK", pais:"Eslovaquia", emisor:"European Central Bank (Eurosistema)", moneda:"Euro digital", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de preparación", fecha:"Decisión prevista 2026", obj1:"Autonomía estratégica", obj2:"Acceso público", enlace:"https://www.ecb.europa.eu" }, { iso3:"SVN", pais:"Eslovenia", emisor:"European Central Bank (Eurosistema)", moneda:"Euro digital", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de preparación", fecha:"Decisión prevista 2026", obj1:"Autonomía estratégica", obj2:"Acceso público", enlace:"https://www.ecb.europa.eu" }, { iso3:"ESP", pais:"España", emisor:"European Central Bank (Eurosistema)", moneda:"Euro digital", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de preparación", fecha:"Decisión prevista 2026", obj1:"Autonomía estratégica", obj2:"Acceso público", enlace:"https://www.ecb.europa.eu" }, { iso3:"EST", pais:"Estonia", emisor:"European Central Bank (Eurosistema)", moneda:"Euro digital", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de preparación", fecha:"Decisión prevista 2026", obj1:"Autonomía estratégica", obj2:"Acceso público", enlace:"https://www.ecb.europa.eu" }, { iso3:"FIN", pais:"Finlandia", emisor:"European Central Bank (Eurosistema)", moneda:"Euro digital", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de preparación", fecha:"Decisión prevista 2026", obj1:"Autonomía estratégica", obj2:"Acceso público", enlace:"https://www.ecb.europa.eu" }, { iso3:"FRA", pais:"francia", emisor:"European Central Bank (Eurosistema)", moneda:"Euro digital", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de preparación", fecha:"Decisión prevista 2026", obj1:"Autonomía estratégica", obj2:"Acceso público", enlace:"https://www.ecb.europa.eu" }, { iso3:"GRC", pais:"Grecia", emisor:"European Central Bank (Eurosistema)", moneda:"Euro digital", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de preparación", fecha:"Decisión prevista 2026", obj1:"Autonomía estratégica", obj2:"Acceso público", enlace:"https://www.ecb.europa.eu" }, { iso3:"IRL", pais:"irlanda", emisor:"European Central Bank (Eurosistema)", moneda:"Euro digital", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de preparación", fecha:"Decisión prevista 2026", obj1:"Autonomía estratégica", obj2:"Acceso público", enlace:"https://www.ecb.europa.eu" }, { iso3:"ITA", pais:"italia", emisor:"European Central Bank (Eurosistema)", moneda:"Euro digital", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de preparación", fecha:"Decisión prevista 2026", obj1:"Autonomía estratégica", obj2:"Acceso público", enlace:"https://www.ecb.europa.eu" }, { iso3:"LVA", pais:"Letonia", emisor:"European Central Bank (Eurosistema)", moneda:"Euro digital", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de preparación", fecha:"Decisión prevista 2026", obj1:"Autonomía estratégica", obj2:"Acceso público", enlace:"https://www.ecb.europa.eu" }, { iso3:"LTU", pais:"Lituania", emisor:"European Central Bank (Eurosistema)", moneda:"Euro digital", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de preparación", fecha:"Decisión prevista 2026", obj1:"Autonomía estratégica", obj2:"Acceso público", enlace:"https://www.ecb.europa.eu" }, { iso3:"LUX", pais:"Luxemburgo", emisor:"European Central Bank (Eurosistema)", moneda:"Euro digital", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de preparación", fecha:"Decisión prevista 2026", obj1:"Autonomía estratégica", obj2:"Acceso público", enlace:"https://www.ecb.europa.eu" }, { iso3:"MLT", pais:"Malta", emisor:"European Central Bank (Eurosistema)", moneda:"Euro digital", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de preparación", fecha:"Decisión prevista 2026", obj1:"Autonomía estratégica", obj2:"Acceso público", enlace:"https://www.ecb.europa.eu" }, { iso3:"NLD", pais:"Países Bajos", emisor:"European Central Bank (Eurosistema)", moneda:"Euro digital", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de preparación", fecha:"Decisión prevista 2026", obj1:"Autonomía estratégica", obj2:"Acceso público", enlace:"https://www.ecb.europa.eu" }, { iso3:"PRT", pais:"Portugal", emisor:"European Central Bank (Eurosistema)", moneda:"Euro digital", tipo:"Minorista", estado:"Desarrollo", fase:"Fase de preparación", fecha:"Decisión prevista 2026", obj1:"Autonomía estratégica", obj2:"Acceso público", enlace:"https://www.ecb.europa.eu" }, { iso3:"USA", pais:"Estados Unidos", emisor:"Federal Reserve", moneda:"Dólar digital", tipo:"Investigacion", estado:"Investigación", fase:"Desarrollo", fecha:"2021", obj1:"-", obj2:"-", enlace:"https://www.federalreserve.gov" }, { iso3:"CHN", pais:"China", emisor:"People's Bank of China", moneda:"e-CNY (Yuan digital)", tipo:"Minorista", estado:"Piloto", fase:"Piloto ampliado", fecha:"2020", obj1:"Modernización del sistema de pagos; reducción del uso de efectivo; soberanía monetaria", obj2:"Internacionalización del RMB; eficiencia en pagos minoristas", enlace:"http://www.pbc.gov.cn" } ];
// =============================
// Escala Estado
// =============================

const estadoScale = {
  "Cancelado": -1,
  "Investigación": 0,
  "Desarrollo": 1,
  "Piloto": 2,
  "Circulación": 3
};

// =============================
// Preparar datos
// =============================

const locations = [];
const z = [];
const hover = [];

rows.forEach(r => {
  locations.push(r.iso3);
  z.push(estadoScale[r.estado]);
  hover.push(
`<b>${r.pais}</b><br>
Emisor: ${r.emisor}<br>
Moneda digital: ${r.moneda}<br>
Tipo: ${r.tipo}<br>
Estado: ${r.estado}<br>
Fase: ${r.fase}<br>
Fecha: ${r.fecha}<br>
Objetivo principal: ${r.obj1}<br>
Objetivo secundario: ${r.obj2}<br>
Enlace: ${r.enlace}`
  );
});

// =============================
// Plot
// =============================

const data = [{
  type: "choropleth",
  locationmode: "ISO-3",
  locations: locations,
  z: z,
  text: hover,
  hovertemplate: "%{text}<extra></extra>",
  colorscale: "Viridis",
  showscale: false,
  marker: { line: { color: "white", width: 0.5 } }
}];

const layout = {
  geo: {
    projection: { type: "natural earth" },
    showframe: false,
    showcoastlines: true,
    coastlinecolor: "#999",
    showocean: true,
    oceancolor: "#e3e7f0"
  },
  margin: { t: 0, b: 0, l: 0, r: 0 },
  paper_bgcolor: "rgba(0,0,0,0)"
};

Plotly.newPlot("map", data, layout, { responsive:true });

// =============================
// Click abre enlace
// =============================

const mapDiv = document.getElementById("map");

mapDiv.on('plotly_click', function(data) {
  const iso = data.points[0].location;
  const row = rows.find(r => r.iso3 === iso);
  if (row?.enlace) window.open(row.enlace, "_blank");
});

// =============================
// Auto-hide overlay
// =============================

const overlay = document.querySelector(".overlay");

function hideOverlay() {
  overlay.classList.add("hidden");
}

function showOverlay() {
  overlay.classList.remove("hidden");
}

mapDiv.on('plotly_relayout', hideOverlay);
mapDiv.on('plotly_click', hideOverlay);

document.addEventListener("mousemove", (e) => {
  if (e.clientY < 90) showOverlay();
});

</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>CBDC Status – Interactive Choropleth Map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <!-- Plotly actualizado -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    <style>
        body {
            margin: 0;
            font-family: Arial, Helvetica, sans-serif;
            background-color: #ffffff;
        }
        #cbdc-map {
            width: 100vw;
            height: 95vh;
        }
        footer {
            text-align: center;
            font-size: 12px;
            color: #555;
            padding: 6px;
        }
    </style>
</head>

<body>

<div id="cbdc-map"></div>

<footer>
    Source: own elaboration based on official central bank publications.
</footer>

<script>

/* =========================
   MAPA CHOROPLETH
   ========================= */

var mapTraces = [

{
    type: "choropleth",
    locationmode: "ISO-3",
    locations: ["BHS","JAM","NGA"],
    z: [1,1,1],
    text: ["Bahamas","Jamaica","Nigeria"],
    name: "Publicly launched",
    colorscale: [[0,"#2F855A"],[1,"#2F855A"]],
    showscale: false,
    marker: {line:{color:"white",width:0.4}}
},

{
    type: "choropleth",
    locationmode: "ISO-3",
    locations: ["AUS","BRA","CHN","GHA","HKG","IND","KAZ","RUS","SWE","TUR"],
    z: Array(10).fill(1),
    text: ["Australia","Brazil","China","Ghana","Hong Kong","India","Kazakhstan","Russia","Sweden","Türkiye"],
    name: "Pilot",
    colorscale: [[0,"#D69E2E"],[1,"#D69E2E"]],
    showscale: false,
    marker: {line:{color:"white",width:0.4}}
},

{
    type: "choropleth",
    locationmode: "ISO-3",
    locations: [
        "AUT","BEL","HRV","CYP","EST","FIN","FRA","DEU","GRC","IRL",
        "ITA","LVA","LTU","LUX","MLT","NLD","PRT","SVK","SVN","ESP",
        "CAN","ARE"
    ],
    z: Array(22).fill(1),
    text: [
        "Austria","Belgium","Croatia","Cyprus","Estonia","Finland","France","Germany","Greece","Ireland",
        "Italy","Latvia","Lithuania","Luxembourg","Malta","Netherlands","Portugal","Slovakia","Slovenia","Spain",
        "Canada","United Arab Emirates"
    ],
    name: "Development",
    colorscale: [[0,"#2B6CB0"],[1,"#2B6CB0"]],
    showscale: false,
    marker: {line:{color:"white",width:0.4}}
},

{
    type: "choropleth",
    locationmode: "ISO-3",
    locations: ["GBR"],
    z: [1],
    text: ["United Kingdom"],
    name: "Design Phase",
    colorscale: [[0,"#6A5ACD"],[1,"#6A5ACD"]],
    showscale: false,
    marker: {line:{color:"white",width:0.4}}
},

{
    type: "choropleth",
    locationmode: "ISO-3",
    locations: ["JPN","MEX","USA"],
    z: [1,1,1],
    text: ["Japan","Mexico","United States"],
    name: "Research / Exploratory",
    colorscale: [[0,"#9B2C2C"],[1,"#9B2C2C"]],
    showscale: false,
    marker: {line:{color:"white",width:0.4}}
},

{
    type: "choropleth",
    locationmode: "ISO-3",
    locations: ["ECU","URY"],
    z: [1,1],
    text: ["Ecuador","Uruguay"],
    name: "Cancelled",
    colorscale: [[0,"#7A7A7A"],[1,"#7A7A7A"]],
    showscale: false,
    marker: {line:{color:"white",width:0.4}}
}

];

/* =========================
   TRACES PARA LEYENDA
   ========================= */

var legendTraces = [

{
    type: "scatter",
    mode: "markers",
    x: [0], y: [0],
    name: "Publicly launched",
    marker: {color:"#2F855A", size:12},
    showlegend: true,
    hoverinfo: "skip"
},
{
    type: "scatter",
    mode: "markers",
    x: [0], y: [0],
    name: "Pilot",
    marker: {color:"#D69E2E", size:12},
    showlegend: true,
    hoverinfo: "skip"
},
{
    type: "scatter",
    mode: "markers",
    x: [0], y: [0],
    name: "Development",
    marker: {color:"#2B6CB0", size:12},
    showlegend: true,
    hoverinfo: "skip"
},
{
    type: "scatter",
    mode: "markers",
    x: [0], y: [0],
    name: "Design Phase",
    marker: {color:"#6A5ACD", size:12},
    showlegend: true,
    hoverinfo: "skip"
},
{
    type: "scatter",
    mode: "markers",
    x: [0], y: [0],
    name: "Research / Exploratory",
    marker: {color:"#9B2C2C", size:12},
    showlegend: true,
    hoverinfo: "skip"
},
{
    type: "scatter",
    mode: "markers",
    x: [0], y: [0],
    name: "Cancelled",
    marker: {color:"#7A7A7A", size:12},
    showlegend: true,
    hoverinfo: "skip"
}

];

/* =========================
   LAYOUT
   ========================= */

var layout = {
    title: {
        text: "CBDC Status (Selected Jurisdictions)",
        x: 0.5,
        font: {size: 20}
    },
    geo: {
        projection: {type: "natural earth"},
        showframe: false,
        showcountries: true,
        countrycolor: "rgba(0,0,0,0.25)",
        showcoastlines: true,
        coastlinecolor: "rgba(0,0,0,0.25)",
        bgcolor: "white"
    },

    /* Ejes invisibles para permitir leyenda */
    xaxis: {visible: false, range: [-1, 1]},
    yaxis: {visible: false, range: [-1, 1]},

    legend: {
        title: {text: "Status"},
        orientation: "v",
        x: 0.02,
        y: 0.02,
        xanchor: "left",
        yanchor: "bottom",
        bgcolor: "rgba(255,255,255,0.9)",
        bordercolor: "rgba(0,0,0,0.2)",
        borderwidth: 1
    },

    margin: {l:10,r:10,t:60,b:10},
    paper_bgcolor: "white"
};

/* =========================
   PLOT
   ========================= */

Plotly.newPlot("cbdc-map", [...mapTraces, ...legendTraces], layout, {responsive:true});

</script>

</body>
</html>
